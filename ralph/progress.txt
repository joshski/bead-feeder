# Progress Log

## 2026-01-13: Initialize Vite React TypeScript project (bead-feeder-qdp)

Set up Vite + React + TypeScript project with:
- Added vite, react, react-dom, @vitejs/plugin-react dependencies
- Created index.html entry point
- Created src/main.tsx and src/App.tsx
- Configured tsconfig.json for React JSX and ESNext modules
- Created vite.config.ts with React plugin
- Created vitest.config.ts with jsdom environment for React testing
- Added @testing-library/react for component tests
- Created src/App.test.tsx with basic render test
- Updated check script to use vitest via `bun run test`
- Updated package.json with Vite scripts (dev, build, preview)

## 2026-01-13: Set up React Router v7 (bead-feeder-4lc)

Configured react-router v7 for navigation:
- Installed react-router v7.12.0
- Created src/pages/DagView.tsx for the main DAG view
- Created src/pages/IssueDetail.tsx for viewing individual issues
- Updated src/App.tsx with layout (header, nav, Outlet)
- Updated src/main.tsx with BrowserRouter and route definitions
- Routes: "/" (DAG view), "/issues/:issueId" (issue detail)
- Updated App.test.tsx to use MemoryRouter for testing

## 2026-01-14: Add React Flow library and configure (bead-feeder-60x)

Installed and configured React Flow for DAG visualization:
- Installed @xyflow/react v12.10.0
- Created src/components/DagCanvas.tsx wrapper component with Background, Controls, and MiniMap
- Updated src/pages/DagView.tsx to use DagCanvas with sample nodes/edges
- Component accepts nodes and edges props for flexible DAG rendering

## 2026-01-14: Create React Flow canvas component (bead-feeder-5ls)

Enhanced DagCanvas with proper FlowProvider setup and pan/zoom controls:
- Added ReactFlowProvider wrapper for state management (enables hooks outside ReactFlow)
- Configured useNodesState and useEdgesState for reactive node/edge updates
- Added comprehensive pan/zoom controls: panOnScroll, selectionOnDrag, zoomOnPinch, zoomOnDoubleClick
- Set zoom bounds (minZoom: 0.1, maxZoom: 4)
- Configured panOnDrag with mouse buttons [1, 2] for middle/right click panning
- Enhanced Controls component with showZoom, showFitView, showInteractive options
- Made MiniMap zoomable and pannable
- Added BackgroundVariant.Dots with configurable gap and size
- Created src/test-setup.ts with ResizeObserver mock for jsdom
- Added src/components/DagCanvas.test.tsx with tests for nodes, controls, and minimap rendering

## 2026-01-14: Create custom node component for issues (bead-feeder-be4)

Built a custom React Flow node component for displaying issues:
- Created src/components/IssueNode.tsx with IssueNodeData interface
- Displays title, status (with color-coded badge), type (with icons), and priority
- Status colors: open (blue), in_progress (amber), closed (green)
- Type icons: task (‚òê), bug (üêõ), feature (‚ú®)
- Priority colors: P0 (red), P1 (orange), P2 (yellow), P3 (gray)
- Clickable button navigates to /issues/:issueId route
- Integrated with DagCanvas via nodeTypes configuration
- Updated DagView with sample issue nodes demonstrating different states
- Added @testing-library/jest-dom for DOM matchers
- Enabled vitest globals for testing
- Created comprehensive tests in src/components/IssueNode.test.tsx

## 2026-01-14: Create API endpoint to list issues (bead-feeder-o15)

Built backend API endpoint that calls 'bd list --json' and returns issues:
- Created api/server.ts with Bun HTTP server
- GET /api/issues endpoint executes 'bd list --json' and returns JSON response
- Added CORS headers for frontend integration (Access-Control-Allow-Origin: *)
- OPTIONS preflight handler for CORS
- Error handling returns 500 with error message
- 404 for unknown routes
- Added dev:api script to package.json for running the server
- Created api/server.test.ts with integration tests (server startup, response format, CORS)

## 2026-01-14: Create API endpoint to get dependency graph (bead-feeder-8mt)

Added GET /api/graph endpoint for dependency graph data:
- Refactored runBdList to generic runBdCommand(args) function for reuse
- GET /api/graph executes 'bd graph --all --json' and returns full graph data
- Response includes Root, Issues, Dependencies, and IssueMap for each graph entry
- Dependencies array contains issue_id, depends_on_id, and type fields
- Added CORS headers consistent with /api/issues endpoint
- Added 3 integration tests: response format, CORS headers, dependency structure

## 2026-01-14: Transform issues to React Flow nodes (bead-feeder-cnl)

Created data transformer to convert beads issue data into React Flow node format:
- Created src/transformers/issueToNode.ts with BdIssue interface matching API response
- issueToNode() converts single bd issue to React Flow Node with IssueNodeData
- issuesToNodes() converts array of issues with configurable grid layout positioning
- Maps status (open/in_progress/closed), type (task/bug/feature), priority (0-3 to P0-P3)
- TransformOptions allow customizing startX/Y, spacingX/Y, and nodesPerRow
- Extended IssueNodeData interface with Record<string, unknown> for React Flow compatibility
- Added comprehensive tests in src/transformers/issueToNode.test.ts (13 tests)

## 2026-01-14: Transform dependencies to React Flow edges (bead-feeder-8jb)

Created data transformer to convert beads dependency relationships into React Flow edges:
- Created src/transformers/dependencyToEdge.ts with BdDependency interface
- dependencyToEdge() converts single dependency to React Flow Edge
- dependenciesToEdges() converts array of dependencies
- Edge direction: source = blocker (depends_on_id), target = blocked (issue_id)
- Edge ID format: `{source}-{target}` for uniqueness
- Uses smoothstep edge type for curved connections
- Added comprehensive tests in src/transformers/dependencyToEdge.test.ts (11 tests)

## 2026-01-14: Implement DAG layout algorithm (bead-feeder-8gq)

Implemented automatic hierarchical positioning of nodes using dagre:
- Installed dagre v0.8.5 and @types/dagre for TypeScript support
- Created src/transformers/dagLayout.ts with applyDagLayout() function
- Uses dagre library for hierarchical/layered graph layout algorithm
- Supports TB (top-to-bottom) and LR (left-to-right) layout directions
- Nodes with no dependencies positioned at top/left, dependents below/right
- Configurable options: direction, nodeSpacingX/Y, nodeWidth, nodeHeight
- Converts dagre center-based positions to React Flow top-left positions
- Added comprehensive tests in src/transformers/dagLayout.test.ts (11 tests)
- Tests cover: empty graphs, single nodes, TB/LR layouts, multi-level dependencies, diamond patterns, isolated nodes

## 2026-01-14: Create API endpoint to create issues (bead-feeder-02x)

Added POST /api/issues endpoint to create new issues via the API:
- POST /api/issues accepts JSON body with title, description, type, and priority fields
- title is required and must be a non-empty string (returns 400 if invalid)
- description, type, priority are optional
- Executes 'bd create' with --json flag for structured output
- Returns 201 status with created issue JSON on success
- Returns 400 for validation errors, 500 for bd command errors
- Includes CORS headers consistent with other endpoints
- Added 5 integration tests: title-only creation, full fields, missing title, empty title, CORS headers

## 2026-01-14: Add issue creation UI (bead-feeder-maj)

Built a UI for creating new issues with a floating action button and modal:
- Created src/components/CreateIssueModal.tsx with form fields for title, description, type, and priority
- Created src/components/FloatingActionButton.tsx as a circular FAB in the bottom-right corner
- Integrated both components into DagView page
- Modal features: accessible dialog with role="dialog" and aria attributes, escape key to close, backdrop click to close
- Form validates that title is required before submission
- Submits to POST /api/issues endpoint, shows error messages on failure
- Button shows "Creating..." state while submitting
- Added src/vite-env.d.ts for Vite environment type definitions (VITE_API_URL)
- Added 11 tests for CreateIssueModal covering form interactions, validation, submission, and error handling
- Added 5 tests for FloatingActionButton covering rendering and click behavior

## 2026-01-14: Create API endpoint to add dependencies (bead-feeder-5yh)

Added POST /api/dependencies endpoint for creating dependency relationships:
- POST /api/dependencies accepts JSON body with blocked and blocker issue IDs
- Both blocked and blocker are required and must be non-empty strings
- Executes 'bd dep add <blocked> <blocker> --json' to create the dependency
- Returns 201 status with created dependency JSON on success
- Returns 400 for validation errors (missing/empty blocked or blocker)
- Detects cycle errors from bd command and returns 400 with descriptive message
- Returns 500 for other bd command errors
- Includes CORS headers consistent with other endpoints
- Added 5 integration tests: successful creation, missing blocked, missing blocker, empty blocked, CORS headers

## 2026-01-14: Enable edge creation by connecting nodes (bead-feeder-360)

Configured React Flow to allow users to draw edges between nodes by dragging from handles:
- Updated DagCanvas component to accept onConnect callback prop
- Added handleConnect function that adds edge to local state for immediate visual feedback
- Uses smoothstep edge type for curved connections
- External onConnect handler is called after adding edge to state
- Updated DagView to pass onConnect handler that calls POST /api/dependencies
- Correctly maps React Flow connection (source‚Üítarget) to dependency API (blocker‚Üíblocked)
- Edge direction: drag from bottom handle (source/blocker) to top handle (target/blocked)
- Errors from API are logged to console
- Added test for DagCanvas accepting onConnect callback prop
- All 66 tests passing

## 2026-01-14: Add chat UI component (bead-feeder-mxu)

Created a chat panel component with message history, input, and markdown rendering:
- Installed react-markdown v10.1.0 for markdown rendering in assistant messages
- Created src/components/ChatPanel.tsx with ChatMessage interface
- ChatPanel accepts messages array, onSendMessage callback, and optional isLoading prop
- Message history display with empty state when no messages
- User messages styled with blue bubbles (right-aligned), assistant messages with white bubbles (left-aligned)
- Markdown rendering for assistant messages using react-markdown (supports bold, code, lists, headings, links)
- Styled code blocks with syntax highlighting colors
- Text input with placeholder and disabled state during loading
- Send button that submits on click or Enter key (Shift+Enter for new line)
- Loading indicator with animated dots when isLoading is true
- Input validation: prevents sending empty or whitespace-only messages
- Added 16 comprehensive tests in src/components/ChatPanel.test.tsx
- All 82 tests passing

## 2026-01-14: Integrate LLM API for chat (bead-feeder-juk)

Connected to Anthropic Claude API from the backend with streaming responses:
- Installed @anthropic-ai/sdk v0.71.2
- Added POST /api/chat endpoint to api/server.ts
- Accepts messages array in request body with role and content fields
- Uses claude-sonnet-4-20250514 model with 1024 max tokens
- Implements Server-Sent Events (SSE) streaming for real-time response delivery
- Streams text deltas as JSON objects with text field
- Sends [DONE] marker when stream completes
- Returns 400 for missing/empty/non-array messages
- Includes CORS headers consistent with other endpoints
- Added 4 integration tests for validation and CORS in api/server.test.ts
- All 86 tests passing (82 unit + 4 new API tests)

## 2026-01-14: Define LLM tools for graph manipulation (bead-feeder-bdg)

Created Anthropic tool definitions for LLM-driven graph manipulation:
- Created api/llm-tools.ts with 5 tool definitions for the LLM
- create_issue: Creates new issues with title (required), description, type (task/bug/feature), priority (0-3)
- add_dependency: Links issues with blocked_issue_id and blocker_issue_id
- remove_dependency: Removes dependency links between issues
- update_issue: Updates issue fields (title, description, type, priority, status, assignee)
- close_issue: Closes an issue with optional reason
- Each tool uses Anthropic Tool type with input_schema for parameter validation
- Exported llmTools array containing all 5 tools for use with the Anthropic API
- Updated vitest.config.ts to include api/**/*.test.ts for running API tests
- Added 26 comprehensive tests in api/llm-tools.test.ts covering all tool definitions
- All 129 tests passing (108 unit + 21 API server tests)

## 2026-01-14: Execute LLM tool calls and update graph (bead-feeder-zic)

Implemented LLM tool execution and real-time graph updates:
- Created api/tool-executor.ts with executeTool() function that maps tool names to bd CLI commands
- Supports all 5 tools: create_issue, add_dependency, remove_dependency, update_issue, close_issue
- Each tool executor constructs proper bd command args and returns structured results
- Updated /api/chat endpoint with full agentic loop:
  - Added SYSTEM_PROMPT with context about the beads issue tracking system
  - Configured Anthropic API to use llmTools for tool calling
  - Implemented while loop that continues until stop_reason !== 'tool_use'
  - Executes tool calls via executeTool() and feeds results back to the model
  - Sends graphUpdated event to frontend when tools were used
- Updated DagView to fetch real data from /api/graph instead of sample data
- Integrated ChatPanel into DagView with side-by-side layout
- Connected chat to /api/chat endpoint with SSE streaming
- Frontend refreshes graph when graphUpdated event is received
- Uses existing transformers (issuesToNodes, dependenciesToEdges) and applyDagLayout for visualization
- Added 7 tests in api/tool-executor.test.ts covering all tool execution paths
- All 136 tests passing

## 2026-01-14: Configure GitHub OAuth app (bead-feeder-bnd)

Set up environment configuration for GitHub OAuth authentication:
- Updated .gitignore to include .env, .env.local, and .env.*.local patterns
- Created .env.example with documented environment variables:
  - GITHUB_CLIENT_ID: OAuth app client ID
  - GITHUB_CLIENT_SECRET: OAuth app client secret (keep secret!)
  - GITHUB_OAUTH_SCOPES: Optional, defaults to "repo"
  - PORT: API server port (default 3001)
  - VITE_API_URL: Frontend API URL
  - VITE_GITHUB_CLIENT_ID: Client ID for frontend OAuth flow
- Documented required OAuth scopes: "repo" for full control of private repositories
- Documented OAuth app registration steps with callback URL
- Updated src/vite-env.d.ts with VITE_GITHUB_CLIENT_ID type definition
- All 136 tests passing

## 2026-01-14: Implement GitHub OAuth login flow (bead-feeder-dl9)

Implemented full GitHub OAuth authentication flow with secure token storage:
- Created src/components/GitHubLoginButton.tsx component with GitHub icon and OAuth redirect
- Generates random state parameter for CSRF protection stored in sessionStorage
- Created src/pages/AuthCallback.tsx to handle GitHub OAuth callback
- Validates state parameter and exchanges authorization code for access token
- Added POST /api/auth/github/callback endpoint to exchange code for GitHub access token
- Added GET /api/auth/me endpoint to check current authentication status via cookie
- Added POST /api/auth/logout endpoint to clear the auth cookie
- Stores access token in secure httpOnly cookie (Max-Age: 24 hours)
- Created src/context/AuthContext.tsx for React auth state management
- AuthProvider fetches user on mount, provides user/logout/refreshUser to children
- Updated src/App.tsx header to show login button or user avatar/name with logout
- Updated src/main.tsx with AuthProvider wrapper and /auth/callback route
- Added CORS credentials support for cross-origin cookie handling
- Added 6 auth-related API tests and 5 GitHubLoginButton component tests
- Added 5 AuthContext tests covering user fetching and error handling
- All 152 tests passing

## 2026-01-14: Fix linting warnings in test files (bead-feeder-lf5)

Fixed 16 lint warnings for non-null assertions in test files:
- Fixed src/components/ChatPanel.test.tsx: replaced `form!` with null check and type cast
- Fixed src/transformers/dagLayout.test.ts: created `findNodeById` helper function to replace all 15 non-null assertions
- Helper function throws descriptive error if node not found, improving test failure messages
- All 152 tests passing with zero lint warnings

## 2026-01-14: Clean up test artifact issues (bead-feeder-7j9)

Removed test artifact issues created by API and tool executor integration tests:
- Closed 68 test issues with titles: "Test Full Issue", "Full Tool Executor Test Issue", "CORS Test Issue", "Dep Test Issue 2", "Test API Issue"
- These were orphaned issues created during integration testing of the bd CLI tools
- Issue tracker now shows only real work items (2 remaining tasks)
- Ready queue clean with legitimate tasks: "Create authenticated git operations service" and "Add repository selector UI"

## 2026-01-14: Create authenticated git operations service (bead-feeder-226)

Built a git operations service that uses GitHub access tokens for authenticated git operations:
- Created api/git-service.ts with the following functions:
  - parseGitHubUrl(): Parses GitHub URLs (HTTPS, SSH, and short form owner/repo)
  - buildAuthenticatedUrl(): Constructs authenticated URL with x-access-token
  - cloneRepository(): Clones a GitHub repo using access token authentication
  - fetchRepository(): Fetches updates from remote with temporary auth URL injection
  - pushRepository(): Pushes to remote using authenticated URL
  - pullRepository(): Pulls from remote using authenticated URL
  - listUserRepositories(): Fetches user's repos from GitHub API
  - getCurrentBranch(): Gets the current git branch name
  - getStatus(): Gets git status (porcelain format)
  - isGitRepository(): Checks if directory is a git repo
- Auth URL injection pattern: temporarily sets remote URL with token, performs operation, restores original URL
- This keeps tokens out of git config and history
- Added 13 comprehensive tests in api/git-service.test.ts
- Also cleaned up 12 more test artifact issues from the issue tracker
- All 165 tests passing

## 2026-01-14: Add repository selector UI (bead-feeder-3e5)

Built a repository selector UI that shows after login and filters repos by .beads presence:
- Added GET /api/repos endpoint to list user's GitHub repositories (uses listUserRepositories from git-service)
- Added GET /api/repos/:owner/:repo/has-beads endpoint to check if a repo has a .beads directory
- Both endpoints require authentication via httpOnly cookie and return 401 if not authenticated
- Created src/components/RepositorySelector.tsx component:
  - Fetches user's repos on mount and checks each for .beads directory
  - Separates repos into "Repositories with Beads" and "Other Repositories" sections
  - Shows loading state, error state with retry button
  - Displays repo owner/name and default branch
  - Clicking a repo calls onSelect callback
- Created src/pages/Home.tsx:
  - Shows welcome card with GitHub login button when not authenticated
  - Shows RepositorySelector when authenticated
  - Navigates to /repos/:owner/:repo on repo selection
- Updated routing in main.tsx:
  - Home page at "/" shows login or repo selector
  - DagView moved to "/repos/:owner/:repo"
- Updated App.tsx header:
  - Title now links to home page
  - Shows breadcrumb with owner/repo when on a repo page
- Added helper function getTokenFromCookies() in server.ts for reuse
- Added 7 tests for RepositorySelector component
- Cleaned up 20 test artifact issues from the issue tracker
- All 172 tests passing

## 2026-01-14: Implement background job queue for sync (bead-feeder-ksp)

Created a background job queue for git sync operations:
- Created api/sync-queue.ts with SyncQueue class for managing git sync operations
- Queue supports three job types: commit, push, and pull
- Debounces rapid commit requests to avoid excessive git operations (configurable, default 2000ms)
- Periodic push interval to sync changes to remote (configurable, default 30000ms)
- Event system with statusChange, syncComplete, and syncError events
- Token management for authenticated git operations via setToken/getToken
- State tracking with SyncQueueState interface (status, pendingJobs, lastSync, lastError)
- Singleton pattern with getSyncQueue() and resetSyncQueue() functions
- Commit operation stages .beads directory and commits only if there are changes
- Push and pull operations use git-service for authenticated operations
- Added 16 comprehensive tests in api/sync-queue.test.ts
- Cleaned up 19 test artifact issues from the issue tracker
- All 188 tests passing

## 2026-01-14: Add sync status indicator (bead-feeder-zyf)

Added UI components for sync status display with toast notifications:
- Created src/components/SyncStatusIndicator.tsx with visual status indicator
  - Displays four states: synced (green), syncing (blue animated), pending (amber), error (red)
  - Shows relative time since last sync ("just now", "5m ago", "2h ago")
  - Tooltip shows error message when in error state
- Created src/components/Toast.tsx with ToastContainer for notifications
  - Supports success, error, and info toast types with appropriate styling
  - Auto-dismisses after 5 seconds with fade animation
  - Manual dismiss button available
- Created src/context/SyncContext.tsx for global sync state management
  - Subscribes to /api/sync/events SSE endpoint for real-time updates
  - Provides status, lastSyncTime, errorMessage, and toast management
  - Auto-shows toasts on sync completion or error
- Added GET /api/sync/events SSE endpoint to api/server.ts
  - Streams sync queue state changes in real-time
  - Sends initial state on connection
  - Subscribes to statusChange, syncComplete, and syncError events
  - Includes heartbeat to keep connection alive
- Integrated SyncProvider in main.tsx
- Added SyncStatusIndicator to App header (visible when viewing a repo)
- Added ToastContainer to App for global notifications
- Fixed flaky test for GET /api/graph that expected Dependencies to always be an array
- Added 8 tests for SyncStatusIndicator
- Added 9 tests for Toast component
- Cleaned up test artifact issues from issue tracker
- All 205 tests passing

## 2026-01-14: Handle sync conflicts and errors (bead-feeder-7d9)

Implemented git conflict detection, retry with exponential backoff, and conflict resolution UI:
- Added conflict detection functions to api/git-service.ts:
  - compareBranches(): Returns ahead/behind counts and diverged status
  - hasConflicts(): Checks for merge conflicts in working directory
  - abortMerge(): Aborts an in-progress merge
  - resolveConflictsTheirs(): Accept all remote changes
  - resolveConflictsOurs(): Accept all local changes
- Updated api/sync-queue.ts with conflict handling:
  - Added 'conflict' status to SyncStatus type
  - Added conflictInfo to SyncQueueState (ahead/behind counts)
  - Added 'conflict' event type for notifying frontend
  - Implemented retry with exponential backoff (configurable maxRetries, retryBaseDelayMs)
  - Push now fetches first, checks if behind remote, auto-pulls if not diverged
  - Detects conflicts during push/pull and emits conflict events
  - Added enqueueResolve() method with 'theirs', 'ours', 'abort' strategies
  - Added clearConflict() to reset conflict state after resolution
- Updated src/components/SyncStatusIndicator.tsx:
  - Added 'conflict' status with red indicator
  - Shows ahead/behind counts when in conflict state
  - Shows Pull/Abort buttons with onResolve callback
- Updated src/context/SyncContext.tsx:
  - Added conflictInfo state and resolveConflict function
  - Handles conflict events from SSE endpoint
  - Shows toast notifications on conflict
- Added POST /api/sync/resolve endpoint to api/server.ts:
  - Accepts resolution: 'theirs' | 'ours' | 'abort'
  - Requires authentication via cookie
  - Triggers sync queue conflict resolution
- Updated /api/sync/events SSE endpoint to emit conflict events
- Added 19 new tests:
  - 3 tests for git-service conflict detection functions
  - 7 tests for sync-queue conflict handling and enqueueResolve
  - 5 tests for SyncStatusIndicator conflict UI
  - 4 tests for /api/sync/resolve endpoint
- Cleaned up 16 test artifact issues from issue tracker
- All 224 tests passing

## 2026-01-14: Pass repository context to graph API (bead-feeder-6w9)

Updated the graph API to fetch issues from selected GitHub repositories:
- Updated src/pages/DagView.tsx:
  - Added useParams hook to extract owner/repo from URL params
  - Modified fetchGraph() to accept optional owner/repo parameters
  - Builds URL with query params when owner/repo provided
  - Added credentials: 'include' for cookie authentication
  - Added react-router-dom dependency (v7.12.0)
- Updated api/server.ts /api/graph endpoint:
  - Accepts optional owner and repo query parameters
  - When params provided: requires authentication, fetches .beads/issues.jsonl via GitHub Contents API
  - Decodes base64 content and parses JSONL format
  - Filters out tombstone issues
  - Returns empty array on 404 (no issues file)
  - When no params: keeps existing local bd graph behavior
- Created api/buildGraphsFromIssues.ts module:
  - Exported BdIssue, BdDependency, GraphApiResponse interfaces
  - buildGraphsFromIssues() transforms issues array to GraphApiResponse format
  - Builds dependency relationships from issue dependencies arrays
  - Identifies root issues (no incoming dependencies)
  - Creates one graph entry per root issue
- Added api/buildGraphsFromIssues.test.ts with 9 tests:
  - Empty input, single issue, dependencies, root identification
  - Multiple roots, multiple dependencies, IssueMap building
  - Property preservation, circular dependency handling
- Added 3 tests to api/server.test.ts for /api/graph with owner/repo:
  - Returns 401 without authentication
  - Includes CORS credentials headers
  - Falls back to local bd command when no params
- All 236 tests passing

## 2026-01-14: Add logging to API (bead-feeder-trx)

Added structured logging to the API server:
- Created api/logger.ts with logging utility module
- Support for log levels: debug, info, warn, error (configurable via LOG_LEVEL env var)
- logRequest() function for HTTP request logging with method, path, status, duration
- Log format: [timestamp] [LEVEL] message method path -> status (duration)
- Status-based log levels: 2xx/3xx=info, 4xx=warn, 5xx=error
- Wrapped server fetch handler to log all requests with timing
- Skips logging for OPTIONS preflight and SSE event stream endpoints
- Catches unhandled errors and logs them with error level
- Added 8 tests in api/logger.test.ts covering all log functions
- Fixed 2 failing tests from previous session (OAuth configuration now present in .env)
- Cleaned up ~30 test artifact issues created by integration tests
- All 244 tests passing

## 2026-01-14: Clean up test artifact issues (maintenance)

Closed 18 test artifact issues that accumulated from API and tool executor integration tests:
- Issues had titles like "Test Full Issue", "Full Tool Executor Test Issue", "CORS Test Issue", "Dep Test Issue", "Test API Issue", "Tool Executor Test Issue"
- Issue tracker is now clean with no open issues
- All 244 tests still passing
- Ready for next feature work

## 2026-01-14: Make 'dev' run both servers with single output (bead-feeder-6s0)

Created a combined dev script that runs both Vite and API servers with merged output:
- Created scripts/dev.ts using Bun's spawn API to run both processes
- Output is prefixed with colored labels: [vite] in cyan, [api] in magenta
- Both stdout and stderr streams are captured and prefixed
- Handles process termination gracefully (SIGINT/SIGTERM cleanup)
- Updated package.json scripts:
  - "dev" now runs scripts/dev.ts (combined servers)
  - "dev:vite" runs vite only
  - "dev:api" runs API server only
- All 244 tests passing

## 2026-01-14: Clean up test artifact issues (maintenance)

Closed 17 test artifact issues that accumulated from API and tool executor integration tests:
- Issues had titles: "Test Full Issue", "Full Tool Executor Test Issue", "CORS Test Issue", "Dep Test Issue 1/2", "Test API Issue", "Tool Executor Test Issue"
- These were orphaned issues created during integration testing runs
- Issue tracker is now clean with no open issues
- All 244 tests still passing
- Ready for next feature work

## 2026-01-14: Stop creating test issues in local repository (bead-feeder-8og)

Fixed integration tests to stop creating real issues in the local beads repository:
- Refactored api/tool-executor.test.ts to mock the node:child_process spawn function
  - Used vi.hoisted() to create mock before vi.mock() hoisting
  - Created mockSpawnSuccess() and mockSpawnFailure() helpers for test setup
  - Tests now verify bd CLI calls without actually executing them
  - Increased test coverage with positive test cases for all tool operations
- Refactored api/server.test.ts to only test validation paths
  - Removed tests that create actual issues (POST /api/issues success cases)
  - Removed tests that create dependencies (POST /api/dependencies success cases)
  - Kept validation tests (400 errors for missing/empty fields) since they don't create issues
  - Added explanatory comments about why success path tests were removed
- Cleaned up 10 existing test artifact issues from previous test runs
- All 245 tests passing (net +1 test from additional tool-executor coverage)
- Issue tracker now stays clean when running tests

## 2026-01-14: Add Playwright script to sign into GitHub (bead-feeder-dh7)

Created a Playwright test script for GitHub authentication e2e testing:
- Added @playwright/test as dev dependency (v1.57.0)
- Installed Chromium browser and system dependencies for Playwright
- Created e2e/github-login.spec.ts with GitHub login test:
  - Reads credentials from TEST_GITHUB_USERNAME and TEST_GITHUB_PASSWORD env vars
  - Navigates to github.com/login and fills in credentials
  - Handles 2FA detection (takes screenshot at 2FA prompt if encountered)
  - Verifies successful login by checking for user avatar/profile elements
  - Takes full-page screenshot of authenticated state
- Created playwright.config.ts with Chromium project configuration
- Added TEST_GITHUB_USERNAME and TEST_GITHUB_PASSWORD to .env.example with documentation
- Added "test:e2e:login" script to package.json to run the test
- Created e2e/ and screenshots/ directories
- Added test-results and screenshots to .gitignore
- All 245 existing tests still passing

## 2026-01-14: E2E test: Load beads issues from GitHub repository (bead-feeder-uko)

Created Playwright e2e test that verifies the full flow of signing into GitHub and loading beads issues:
- Created e2e/load-beads-issues.spec.ts with comprehensive test flow:
  - Step 1: Signs into GitHub using TEST_GITHUB_USERNAME and TEST_GITHUB_PASSWORD env vars
  - Step 2: Navigates to the Bead Feeder app and clicks the GitHub login button
  - Step 3: Handles GitHub OAuth authorization (clicks Authorize if first time)
  - Step 4: Selects the test repository from the repository selector
  - Step 5: Verifies issue nodes are displayed in the DAG view
- Test uses configurable TEST_GITHUB_REPOSITORY env var (defaults to josh-beads-test-1/bead-feeder-example-issues)
- Detects 2FA and fails with helpful error message if encountered
- Takes success screenshot to screenshots/e2e-issues-loaded.png on completion
- Playwright config already has screenshot: 'only-on-failure' for automatic failure screenshots
- Added "test:e2e:load-issues" script to package.json
- Added TEST_GITHUB_REPOSITORY to .env.example with documentation
- All 245 tests still passing
